@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme Variables */
:root {
  /* Light Mode */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #f1f5f9;
  --text-primary: #1e293b;
  --text-secondary: #64748b;
  --text-tertiary: #94a3b8;
  --border-primary: #e2e8f0;
  --border-secondary: #cbd5e1;
  --accent-primary: #6366f1;
  --accent-primary-hover: #4f46e5;
  --accent-secondary: #8b5cf6;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] {
  /* Dark Mode */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --text-tertiary: #94a3b8;
  --border-primary: #334155;
  --border-secondary: #475569;
  --accent-primary: #818cf8;
  --accent-primary-hover: #6366f1;
  --accent-secondary: #a78bfa;
  --success: #34d399;
  --warning: #fbbf24;
  --error: #f87171;
}

/* =================================================================
   1. GLOBAL SCROLLBAR (THEME-AWARE)
   ================================================================= */
@layer base {
  /* Default untuk seluruh halaman */
  * {
    scrollbar-width: thin; 
    scrollbar-color: var(--text-tertiary) transparent;
  }

  /* Webkit (Chrome, Edge, Safari) */
  ::-webkit-scrollbar {
    width: 6px;  
    height: 6px; 
  }

  ::-webkit-scrollbar-track {
    background: transparent !important;
    margin-block: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--text-tertiary); 
    border-radius: 9999px; 
    border: 1px solid transparent;
    background-clip: content-box;
    transition: background-color 0.3s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent-primary) !important;
    border: 0; 
  }

  ::-webkit-scrollbar-corner {
    background: transparent !important;
  }

  /* 2. TEXT SELECTION & CARET (THEME-AWARE) */
  ::selection {
    background-color: color-mix(in srgb, var(--accent-primary) 30%, transparent);
    color: var(--text-primary);
  }

  input, textarea, [contenteditable] {
    caret-color: var(--accent-primary);
  }
}

/* =================================================================
   3. LEXICAL EDITOR SPECIFIC STYLES
   ================================================================= */
@layer components {
  /* Fix untuk Nested List di Lexical agar indentation rapi */
  .editor-nested-list-item {
    list-style-type: none;
  }
  
  /* Pastikan list default browser tidak mengganggu (Reset) */
  ul, ol {
    margin: 0;
    padding: 0;
  }

  /* Placeholder Styling (Teks abu-abu "Mulai menulis...") */
  .editor-placeholder {
    color: var(--text-tertiary);
    overflow: hidden;
    position: absolute;
    text-overflow: ellipsis;
    top: 15px;
    left: 10px;
    font-size: 15px;
    user-select: none;
    display: inline-block;
    pointer-events: none;
  }
}

/* =================================================================
   4. THEME-AWARE COMPONENT STYLES
   ================================================================= */
@layer components {
  /* Editor Container */
  .editor-container {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
  }
  
  .editor-toolbar {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-primary);
    color: var(--text-primary);
  }
  
  .editor-content {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }
  
  /* Sidebar */
  .sidebar {
    background-color: var(--bg-tertiary);
    border-right: 1px solid var(--border-primary);
    color: var(--text-primary);
  }
  
  .sidebar-header {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-primary);
  }
  
  /* Assistant Panel */
  .assistant-panel {
    background-color: var(--bg-tertiary);
    border-left: 1px solid var(--border-primary);
    color: var(--text-primary);
  }
  
  /* Buttons */
  .btn-primary {
    background-color: var(--accent-primary);
    color: white;
    border: none;
  }
  
  .btn-primary:hover {
    background-color: var(--accent-primary-hover);
  }
  
  .btn-secondary {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
  }
  
  .btn-secondary:hover {
    background-color: color-mix(in srgb, var(--accent-primary) 10%, transparent);
  }
  
  /* Status indicators */
  .status-saving {
    color: var(--warning);
  }
  
  .status-saved {
    color: var(--success);
  }
  
  .status-error {
    color: var(--error);
  }
}

/* =================================================================
   5. ANIMATION UTILITIES
   ================================================================= */
.animate-in {
  animation: fadeIn 0.2s ease-out forwards;
}

.animate-out {
  animation: fadeOut 0.2s ease-in forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes fadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.98); }
}

/* Glass Panel Helper (Theme-aware) */
.glass-panel {
  background: color-mix(in srgb, var(--bg-tertiary) 80%, transparent);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid color-mix(in srgb, var(--border-primary) 50%, transparent);
}

/* =================================================================
   6. PRINT STYLES (Agar rapi saat Export PDF/Print)
   ================================================================= */
@media print {
  /* Sembunyikan Sidebar & UI saat print */
  aside, header, .floating-toolbar, .Toastify {
    display: none !important;
  }

  /* Atur background jadi putih kertas */
  body, main, .bg-\[\#0D0F12\], .bg-\[\#0F1115\], [data-theme] {
    background-color: white !important;
    color: black !important;
  }

  /* Hapus scrollbar & border */
  .overflow-y-auto {
    overflow: visible !important;
    height: auto !important;
  }
  
  .border, .border-t, .border-b {
    border: none !important;
  }

  /* Reset Text Color untuk Kertas */
  p, h1, h2, h3, li, span {
    color: black !important;
    text-shadow: none !important;
  }
}